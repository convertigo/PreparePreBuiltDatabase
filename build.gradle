apply plugin: 'eclipse'
apply plugin: 'java-library'
apply plugin: 'maven-publish'

compileJava.options.encoding = 'UTF-8'

group 'com.convertigo.lib'
version = '1.3-SNAPSHOT'

sourceSets {
	main {
		java {
			srcDir 'src'
			sourceCompatibility = '1.8'
			targetCompatibility = '1.8'
		}
		resources {
			srcDir 'src'
		}
	}
}

publishing {
	publications {
		mavenJava(MavenPublication) {
			from components.java
		}
	}
	
	repositories {
		maven {
			url project.properties['c8o.m2.url']
			credentials(AwsCredentials) {
				accessKey project.properties['c8o.m2.ak']
				secretKey project.properties['c8o.m2.sk']
			}
		}
	}
}

repositories {
	jcenter()
}

dependencies {
	compile 'com.couchbase.lite:couchbase-lite-java:1.4.0'
	compile 'com.couchbase.lite:couchbase-lite-java-javascript:1.4.0'
	compile 'com.couchbase.lite:couchbase-lite-java-sqlcipher:1.4.0'
	compile 'com.couchbase.lite:couchbase-lite-java-javascript:1.4.0'
}

jar {
	manifest {
		attributes 'Main-Class': 'com.twinsoft.convertigo.util.PrepareCBLDatabase'
	}
	
	from {
		configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
	}
}
